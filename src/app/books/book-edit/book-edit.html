<div class="edit-book-container">
  <h1 class="page-title">Edit Book</h1>

  @if (loading) {
    <div class="loading-container">
      <div class="loading-pulse">
        <div class="loading-spinner"></div>
        <p class="loading-text">Loading book...</p>
      </div>
    </div>
  } @else if (error) {
    <div class="error-container">
      <p class="error-message">{{ error }}</p>
      <button (click)="goBack()" class="btn btn-secondary mt-4">
        Back to Books
      </button>
    </div>
  } @else if (book) {
    <form #bookForm="ngForm" (ngSubmit)="onSubmit()" class="book-form">
      <div class="form-grid">

        <div class="form-field-full">
          <label for="title" class="form-label">Title</label>
          <input
            type="text"
            id="title"
            name="title"
            [(ngModel)]="book.title"
            required
            class="form-input"
          />
        </div>

        <div class="form-field-full">
          <label for="subtitle" class="form-label">Subtitle</label>
          <input
            type="text"
            id="subtitle"
            name="subtitle"
            [(ngModel)]="book.subtitle"
            class="form-input"
          />
        </div>

        <div class="form-field">
          <label for="isbn" class="form-label">ISBN</label>
          <input
            type="text"
            id="isbn"
            name="isbn"
            [(ngModel)]="book.isbn"
            required
            class="form-input"
          />
        </div>

        <div class="form-field">
          <label for="author" class="form-label">Author</label>
          <input
            type="text"
            id="author"
            name="author"
            [(ngModel)]="book.author"
            required
            class="form-input"
          />
        </div>

        <div class="form-field">
          <label for="publisher" class="form-label">Publisher</label>
          <input
            type="text"
            id="publisher"
            name="publisher"
            [(ngModel)]="book.publisher"
            required
            class="form-input"
          />
        </div>

        <div class="form-field">
          <label for="numPages" class="form-label">Pages</label>
          <input
            type="number"
            id="numPages"
            name="numPages"
            [(ngModel)]="book.numPages"
            required
            min="1"
            class="form-input"
          />
        </div>

        <div class="form-field">
          <label for="price" class="form-label">Price</label>
          <input
            type="text"
            id="price"
            name="price"
            [(ngModel)]="book.price"
            required
            class="form-input"
          />
        </div>

        <div class="form-field">
          <label for="cover" class="form-label">Cover URL</label>
          <input
            type="text"
            id="cover"
            name="cover"
            [(ngModel)]="book.cover"
            class="form-input"
          />
        </div>

        <div class="form-field-full">
          <label for="abstract" class="form-label">Abstract</label>
          <textarea
            id="abstract"
            name="abstract"
            [(ngModel)]="book.abstract"
            rows="4"
            class="form-textarea"
          ></textarea>
        </div>
      </div>

      <div class="form-actions">
        <button
          type="button"
          (click)="goBack()"
          class="btn btn-secondary"
        >
          Cancel
        </button>

        <button
          type="submit"
          [disabled]="bookForm.invalid || saving"
          class="btn btn-primary"
        >
          {{ saving ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>
    </form>
  }
</div>
